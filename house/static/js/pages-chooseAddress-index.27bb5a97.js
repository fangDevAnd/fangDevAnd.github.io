(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chooseAddress-index"],{"163a":function(e,t,i){"use strict";i.r(t);var s=i("8715"),a=i("e381");for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("732a"),i("a738");var o=i("f0c5"),d=Object(o["a"])(a["default"],s["b"],s["c"],!1,null,"c594eefc",null,!1,s["a"],void 0);t["default"]=d.exports},"732a":function(e,t,i){"use strict";var s=i("b569"),a=i.n(s);a.a},8715:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}));var s={uIcon:i("2240").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"app"},[i("v-uni-view",{staticClass:"current-address row b-b"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"row"},[i("v-uni-text",{staticClass:"red"},[e._v("[当前]")]),i("v-uni-text",{staticClass:"title"},[e._v(e._s(e.currentAddress.title))])],1),i("v-uni-text",{staticClass:"addr clamp"},[e._v(e._s(e.currentAddress.address))])],1),i("u-icon",{attrs:{size:"40",name:"search"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navTo("search?city="+e.curCity)}}})],1),i("v-uni-view",{staticClass:"confirm-wrap row"},[i("v-uni-view",{staticClass:"btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("确定")])],1),i("v-uni-map",{staticClass:"map",attrs:{id:"map",scale:15,"show-location":!0,longitude:e.map.longitude,latitude:e.map.latitude},on:{regionchange:function(t){arguments[0]=t=e.$handleEvent(t),e.onRegionchange.apply(void 0,arguments)}}},[i("v-uni-cover-image",{staticClass:"map-center-icon",attrs:{src:"https://7478-tx-cloud-mix-mall-d6944c-1302673523.tcb.qcloud.la/5bfbd58b18200d8e16f6b17a02e6ed9.png"}})],1),i("v-uni-scroll-view",{staticClass:"addr-list-scroll",attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"addr-list"},e._l(e.list,(function(t,s){return i("v-uni-view",{key:s,staticClass:"addr-item b-b row",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseAddress(s)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"title"},[e._v(e._s(t.title))]),i("v-uni-text",{staticClass:"addr"},[e._v(e._s(t.address))])],1),e.checked===s?i("v-uni-icon",{staticClass:"icon_circle",attrs:{type:"success",color:"#2979ff",size:"18"}}):e._e()],1)})),1)],1)],1)},n=[]},a738:function(e,t,i){"use strict";var s=i("f451"),a=i.n(s);a.a},a7e1:function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.app[data-v-c594eefc]{display:flex;flex-direction:column;height:100%;overflow:hidden}.row[data-v-c594eefc]{display:flex;align-items:center}.b-b[data-v-c594eefc]{position:relative}.b-b[data-v-c594eefc]:after{position:absolute;z-index:3;left:0;top:auto;bottom:0;right:0;height:0;content:"";-webkit-transform:scaleY(.5);transform:scaleY(.5);border-bottom:1px solid #e5e5e5}.clamp[data-v-c594eefc]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.current-address[data-v-c594eefc]{height:%?120?%;padding:0 %?24?%;background-color:#fff}.current-address .left[data-v-c594eefc]{width:%?634?%}.current-address .red[data-v-c594eefc]{flex-shrink:0;margin-right:%?6?%;font-size:%?28?%;color:#2979ff;line-height:%?36?%}.current-address .title[data-v-c594eefc]{font-size:%?28?%;color:#333;font-weight:700;line-height:%?36?%}.current-address .addr[data-v-c594eefc]{width:%?700?%;margin-top:%?12?%;font-size:%?24?%;color:#909399;line-height:1.4}.current-address .ser-icon[data-v-c594eefc]{flex-shrink:0;width:%?66?%;height:%?66?%;padding:%?12?% %?4?% %?12?% %?20?%}.confirm-wrap[data-v-c594eefc]{height:%?88?%;padding:0 %?24?%;background-color:#fff}.confirm-wrap .input[data-v-c594eefc]{flex:1;font-size:%?28?%;color:#303133}.confirm-wrap .btn[data-v-c594eefc]{width:%?700?%;padding:0 %?25?%;font-size:%?26?%;color:#fff;height:%?60?%;line-height:%?60?%;background-color:#2979ff;border-radius:%?100?%;text-align:center}.map[data-v-c594eefc]{width:%?750?%;height:%?700?%}.map .map-center-icon[data-v-c594eefc]{position:absolute;left:%?339?%;top:%?264?%;width:%?72?%;height:%?72?%}.addr-list-scroll[data-v-c594eefc]{flex:1;overflow:hidden}.addr-list-scroll .addr-list[data-v-c594eefc]{background-color:#fff}.addr-list-scroll .addr-item[data-v-c594eefc]{padding:%?24?%}.addr-list-scroll .left[data-v-c594eefc]{flex:1;display:flex;flex-direction:column;padding-right:%?50?%}.addr-list-scroll .title[data-v-c594eefc]{font-size:%?28?%;color:#303133}.addr-list-scroll .addr[data-v-c594eefc]{margin-top:%?10?%;font-size:%?24?%;color:#909399;line-height:1.4}',""]),e.exports=t},aaa8:function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,"uni-page-body[data-v-c594eefc]{height:100%;background:#f6f6f6}body.?%PAGE?%[data-v-c594eefc]{background:#f6f6f6}",""]),e.exports=t},b427:function(e,t,i){"use strict";(function(e){i("7a82");var s=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("d81d"),i("d3b7"),i("159b"),i("3c65");var a=s(i("c7eb")),n=s(i("1da1")),o=i("fbb8"),d=new o({key:"34QBZ-XS4K2-WMMUJ-CGPFB-ZNQJQ-LXBIO"}),c=null,r={data:function(){return{curCity:"",mapStatus:1,map:{longitude:116.39742,latitude:39.909},room:"",list:[],checked:0,tempAddress:null}},computed:{currentAddress:function(){return 0===this.list.length?{}:this.list[this.checked]}},created:function(){c=uni.createMapContext("map")},onNavigationBarButtonTap:function(){this.submit()},onLoad:function(e){var t=this;return(0,n.default)((0,a.default)().mark((function i(){var s,n,o,d;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=e.data,!s){i.next=8;break}t.tempAddress=JSON.parse(s),t.room=t.tempAddress.room,n=t.tempAddress.location.lng,o=t.tempAddress.location.lat,i.next=13;break;case 8:return i.next=10,t.getLocation();case 10:d=i.sent,n=+d.longitude,o=+d.latitude;case 13:t.map={longitude:n,latitude:o},t.position={longitude:n,latitude:o},t.getAddressList(1);case 16:case"end":return i.stop()}}),i)})))()},methods:{submit:function(){var e=this.currentAddress,t=(this.room,e.ad_info,e.address),i=e.location;e.title;uni.$emit("changeAddressConfig",t,i.lng,i.lat),uni.navigateBack()},getAddressList:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;1!==this.isSetTempAddress&&d.reverseGeocoder({location:{latitude:this.position.latitude,longitude:this.position.longitude},get_poi:1,poi_options:"page_size=30;page_index=1",success:function(s){if(e("log","获取地理位置列表",s," at pages/chooseAddress/index.vue:134"),s.result.pois.forEach((function(e){e.ad_info||(e.ad_info={adcode:e.adcode,city:e.city,district:e.district,province:e.province})})),t.tempAddress&&(t.tempAddress.title!=s.result.pois[0].title&&(t.tempAddress.ad_info||(t.tempAddress.ad_info={adcode:t.tempAddress.adcode,city:t.tempAddress.city,district:t.tempAddress.district,province:t.tempAddress.province}),s.result.pois.unshift(t.tempAddress)),t.tempAddress=null,t.isSetTempAddress=1,setTimeout((function(){t.isSetTempAddress=0}),500)),i){var a=s.result.pois[0].ad_info;t.curCity=a.city||"",s.result.pois[0].select=1,t.list=s.result.pois,t.checked=0}else t.list=s.result.pois},fail:function(t){e("log","失败"," at pages/chooseAddress/index.vue:175"),e("log",t," at pages/chooseAddress/index.vue:176")},complete:function(t){e("log","complete",t," at pages/chooseAddress/index.vue:179")}})},onRegionchange:function(t){var i=this;clearTimeout(this.timer),this.timer=setTimeout((function(){"end"!==t.type&&"regionchange"!==t.type||c.getCenterLocation({success:function(e){i.position={latitude:e.latitude,longitude:e.longitude},1==i.mapStatus&&i.getAddressList(1)},fail:function(t){e("log",t," at pages/chooseAddress/index.vue:200")}})}),200)},chooseAddress:function(e){var t=this,i=this.list;this.map={longitude:i[e].location.lng,latitude:i[e].location.lat},this.checked=e,this.mapStatus=0,clearTimeout(this.mapStatusTimer),this.mapStatusTimer=setTimeout((function(){t.mapStatus=1}),1e3)},getLocation:function(){return new Promise((function(t){uni.getLocation({type:"gcj02",success:function(i){e("log",i," at pages/chooseAddress/index.vue:227"),t({longitude:i.longitude,latitude:i.latitude})},err:function(i){e("log",i," at pages/chooseAddress/index.vue:234"),t({longitude:116.39742,latitude:39.909})},complete:function(e){}})}))},navTo:function(e){uni.navigateTo({url:e})}}};t.default=r}).call(this,i("0de9")["log"])},b569:function(e,t,i){var s=i("aaa8");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("4f06").default;a("3d3d5623",s,!0,{sourceMap:!1,shadowMode:!1})},e381:function(e,t,i){"use strict";i.r(t);var s=i("b427"),a=i.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(n);t["default"]=a.a},f451:function(e,t,i){var s=i("a7e1");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("4f06").default;a("7767fd68",s,!0,{sourceMap:!1,shadowMode:!1})}}]);